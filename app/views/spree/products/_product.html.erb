<% cache cache_key_for_product_wihtout_version(product) do %>
<% url = spree.product_path(product, taxon_id: @taxon&.id) %>
<div class="col-xl-2 col-lg-4 col-6">
  <div class="product-wrap" id="product_<%= product.id %>" data-hook="products_list_item">
    <%= link_to url, title: product.name, data: { turbolinks: false } do %>
      <div class="product-img">
        <%= plp_and_carousel_image(product, image_class) %>
        <div class="price">
          <% if product&.sale_prices&.active&.present? %>
            <span><%= display_original_price(product.lowest_sale_price.price.variant) %></span>
            <%= product.lowest_sale_price.display_price %>
          <% else %>
            <%= display_price(product) %>
          <% end %> 
        </div>
      </div>
      <div class="product-desc"><% if product&.sale_prices&.active&.present? %><span class="ending-badge"><%= display_highest_discount_percent(product) %></span><% end %>
        <div class="product-desc-title"><%= product.name %></div>
      </div>
    <% end %>
  </div>
</div>
<% end %>