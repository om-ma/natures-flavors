<% is_product_available_in_currency = product_available_in_currency? %>
<% default_variant = default_variant(@variants, @product) %>
<div class="product-side-details d-flex flex-column justify-content-between h-100"  >
  <div class="top-detail" >
    <% if @product.on_sale? %>
      <div class="deal-expiry-wrap" id="deals-expiry" data-SalesExpiryDate="<%=  sale_date_time_counter(@product.master&.sale_prices&.active&.last&.end_at)%>">
      </div>
    <% end %>
    <%= form_for :order, html: {
      id: 'add-to-cart-form',
      class: 'add-to-cart-form',
      'data-product-summary': @product_summary.to_json,
      'data-variants': product_variants_matrix(is_product_available_in_currency),
      'data-variant-change-trigger-identifier': variant_change_identifier
      } do |f| %>
      <div class="product-options-header d-flex align-items-center justify-content-between" id="inside-product-cart-form" data-hook="inside_product_cart_form">
        <div class="left">Choose your <strong>option:</strong></div>
        <div class="right">
          <div class="text-center text-md-left" id="product_variant_sku">
            <%= default_variant.sku %>
          </div>
        </div>
      </div>
      <ul class="size-availability" id="product-variants">
        <% if @product.variants_and_option_values(current_currency).any? %>
          <% @product.variants_and_option_values(current_currency).each_with_index do |variant, index| %>  
            <li class="d-flex flex-wrap align-items-center justify-content-between  product-ov-js <%= index == 0 ? 'active' : '' %>"
              data-varient-id="<%= variant.id %>" data-varient-sku="<%= variant.sku %>" data-btn-varient-price="<%= variant.price_in(current_currency).money %>" > 
              <% option_value = variant.size_options %>
              <div class="left  add-to-cart-form-price price selling"  id="product-price"  data-hook="product_price">
                <span content="<%= current_currency %>"></span> 
                <% if variant.on_sale? %> 
                  <del><%= variant.price_in(current_currency).money %></del><%= display_price(@product) %><span>/ $6.29 per oz.</span>  
                <% else %>
                  <%= variant.price_in(current_currency).money %><span>/ $6.29 per oz.</span>
                <% end %>
              </div>   
              <div class="right"> 
                <%= option_value&.presentation %>
                <% default_id = @product.variants.present? ? @product.variants.first.id : @product.master.id %>
                <%= hidden_field_tag "variant_id", default_id, id: "selected_variant" %>  
              </div>
            </li>
          <% end %>    
        <% else %>
          <%= hidden_field_tag "variant_id", @product.master.id %>
        <% end %>
      </ul>
      <div class="d-flex justify-content-end mb-5">
        <button type="button" class="btn btn-white expand-list">More Options</button>
      </div>
      <% if is_product_available_in_currency && @product.can_supply? %>
        <%= hidden_field_tag "variant_id", default_variant.id %>
        <div class="add-to-cart-wrap mb-30">
          <label>Quantity:</label>
          <div class="d-flex flex-wrap align-items-center">
            <%= render 'spree/shared/quantity_select', input_name: :quantity %>
            <%= button_tag class: 'btn btn-primary add-to-cart-button', id: 'add-to-cart-button', type: :submit do %>
              <span id="product_btn_variant_price" > <%= default_variant.price_in(current_currency).money %> - </span>
              <%= Spree.t(:add_to_cart) %>
            <% end %>
          </div>
        </div>
      <%end%>
    <%end%>
  </div>
  <% if @best_sellers_product.present? %>
    <%= render partial: 'spree/shared/cart_similar_products', locals: { best_sellers_product: @best_sellers_product }  %>
  <% end %>  
</div>