<% @body_id = 'cart' %>
<main class="page-contents">
  <div class="cart-wrapper" data-hook="cart_container" class="container shopping-cart">
    <div class="row no-gutters">
      <div class="col-xl-2 tablet-hide"></div>
      <div class="col-xl-7 col-lg-8">
        <div class="wrap">
          <%= render 'spree/shared/breadcrumbs', current_page_name: Spree.t('cart_page.title') %>
          <h1 class="title mb-20">My Cart</h1>
          <% if @order.line_items.empty? %>
            <hr>
            <div data-hook="empty_cart">
              <%= render 'spree/shared/empty_cart' %>
            </div>
          <% else %>
            <div  data-hook="outside_cart_form">
              <%= form_for @order, url: spree.update_cart_path, html: { id: 'update-cart' } do |order_form| %>
                <div data-hook="inside_cart_form">
                  <ul class="cart-items all-cart">
                    <%= render partial: 'form', locals: { order_form: order_form } %>
                  </ul>
                  <div class="cart-footer d-flex flex-column ml-auto">
                    <% if Spree::Frontend::Config[:coupon_codes_enabled] %>
                      <%= render 'coupon_code',
                        promotion: @order.valid_coupon_promotions.first,
                        order_form: order_form,
                        classes: '' %>
                    <% end %>
                    <ul class="cart-totals">
                      <li>
                        <label>Subtotal:</label>
                        <span><%= order_form.object.display_item_total %></span> 
                      </li>
                      <% if !order_form.object.cart_promo_total.zero? %>
                        <li>
                          <label>
                            <%= Spree.t(:promotion) %>
                          </label>
                          <strong>
                            <%= order_form.object.display_cart_promo_total %>
                          </strong>
                        </li>  
                      <% end %>
                      <li>
                        <label>Shipping:</label>
                        <span>Calculated in next step</span>
                      </li>
                      <li>
                        <label>Total:</label>
                          <strong> <%= order_form.object.display_total %> </strong> 
                      </li>
                    </ul>
                  </div>
                  <hr>
                  <div class="text-right" data-hook="cart_buttons">
                    <%= link_to spree.checkout_path, id: 'checkout-link', method: :get do %>
                    <button class="btn btn-primary">
                      <strong>  <%= order_form.object.display_total %>  -
                        <%= Spree.t('cart_page.checkout') %> </strong>
                    </button>
                    <% end %>
                  </div>
                </div>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
      <div class="col-xl-3 col-lg-4 phone-hide">
        <% if @best_sellers_product.present? %>
          <div class="cart-similar-item">
            <%= render partial: 'spree/shared/cart_similar_products', locals: { best_sellers_product: @best_sellers_product }  %>
          </div>  
        <% end %>
      </div> 
    </div>
  </div>
</main>
